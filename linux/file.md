## <center>文件</center>

### 索引结点
POSIX标准
* 文件类型
* 与文件相关的硬链接个数
* 以字节为单位的文件长度
* 设备标识符(即包含文件的设备的标识符)
* 在文件系统中表示文件的索引结点号
* 文件拥有着的UID
* 文件的用户组ID
* 几个时间戳、表示索引节点状态改变的时间、最后访问时间及最后修改时间
* 访问权限和文件模式(文件所有者的用户、同组用户，不包括所有者、所有剩下的用户)
  可执行文件时
  1. suid - 进程拥有者的UID
  2. sgid - 进程组的用户组ID
  3. sticky  - 
### 文件操作的系统调用
* 打开文件 - 进程只能访问‘打开的’文件  
  `fd = open(path,flag,mode)`
  1. path 
  2. flag 指定文件打开的方式(例如，读，写，读/写，追加)，或是否创建一个不存在的文件
  3. mode - 指定新创建文件的访问权限
  4. 返回 - 打开文件+文件描述符
* 创建文件 create()
内核把文件 指针存放在打开文件对象中，即当前位置就是下一次进行读或写操作的位置
* 更改指针位置
  `newoffset =  lseek(fd, offset, whence)`
  1. fd - 表示打开文件的文件描述符
  2. offset - 指定一个有符号的整数值，用来计算文件指针的新位置
  3. whence - 指定文件指针新位置的计算方式，如 offset + 0,表示文件指针从文件头移动
     offset 加文件指针当前位置，表示从当前位置移动，offset加文件最后一字节的位置，表
     示文件指针从文件末尾开始移动
* 读文件
  `nread = read(fd, buf, count)`
  1. fd - 打开文件的文件描述符
  2. buf - 指定在进程地址空间中缓存区的地址，所读的数据就放在这个缓冲区
  3. count - 所读的字节数
* 关闭文件
  `res = close(fd)`
* 更名
  `res = rename(oldpath,newpath)`
* 删除文件
  `res = unlink(pathname)`
### 进程/内核模式(CPU)
* 用户态
  不能直接访问内核数据结构或内核的程序
* 内核态
* 用户进程

* 内核线程 特权进程
 1. 它们以内核态运行在内核地址空间
 2. 它们不与用户直接交互，因此不需要终端设备
 3. 它们通常在系统启动时创建，然后一直处于活跃状态知道系统关闭
